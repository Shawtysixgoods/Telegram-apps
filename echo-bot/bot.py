import os  # импорт модуля для работы с переменными окружения
import telebot  # импорт библиотеки для создания бота в Telegram

# Получаем токен бота из переменной окружения. Важно установить переменную среды BOT_TOKEN.
TOKEN = ""
if not TOKEN:
    raise Exception("Не найден токен бота!")

# Инициализируем бота с полученным токеном
bot = telebot.TeleBot(TOKEN)

# Обработчик команды /start для приветствия пользователя
@bot.message_handler(commands=['start'])
def send_welcome(message):
    # Комментарий: отправляем приветственное сообщение пользователю
    bot.reply_to(message, "Привет! Я эхо-бот. Отправь мне любое сообщение, и я повторю его!")

# Обработчик текстовых сообщений, который отправляет обратно тот же текст (эхо)
@bot.message_handler(func=lambda message: True)
def echo_message(message):
    # Комментарий: получаем текст из сообщения и отправляем его обратно пользователю
    bot.reply_to(message, f"Вы сказали: {message.text}")

# Запускаем бота с использованием метода polling для опроса сервера Telegram на новые сообщения
if __name__ == '__main__':
    # Комментарий: запуск бота в режиме polling, чтобы начать обработку входящих сообщений
    bot.polling()